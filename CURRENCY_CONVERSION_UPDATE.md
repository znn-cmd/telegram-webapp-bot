# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –¢—É—Ä—Ü–∏–∏

## –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–í–Ω–µ—Å–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ü–µ–Ω –∏–∑ —Ç—É—Ä–µ—Ü–∫–∏—Ö –ª–∏—Ä (TRY) –≤ –µ–≤—Ä–æ (EUR) –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ –¢—É—Ä—Ü–∏–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞ "–ü–æ —Ç–∏–ø—É –¥–æ–º–∞"

- **–§–∞–π–ª**: `app.py`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω –±–ª–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ —Ç–∏–ø—É –¥–æ–º–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ `get_market_comparison_data`
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- **–§–∞–π–ª**: `webapp_full_report.html`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω HTML –±–ª–æ–∫ –∏ JavaScript –∫–æ–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ —Ç–∏–ø—É –¥–æ–º–∞
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 2. –£–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç

#### 2.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `get_market_comparison_data`

- **–§–∞–π–ª**: `app.py`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `is_turkish` –∏ `currency_rate`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ TRY –≤ EUR –¥–ª—è —Ç—É—Ä–µ—Ü–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

#### 2.2 –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Å–µ–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º

- **–í–æ–∑—Ä–∞—Å—Ç –æ–±—ä–µ–∫—Ç–∞**: –î–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `age_data` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ EUR
- **–≠—Ç–∞–∂**: –î–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `floor_segment_data` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ EUR  
- **–û—Ç–æ–ø–ª–µ–Ω–∏–µ**: –î–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `heating_data` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ EUR

#### 2.3 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—É—Ä–µ—Ü–∫–æ–π –ª–æ–∫–∞—Ü–∏–∏

- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ ID —Å—Ç—Ä–∞–Ω—ã**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ `locations` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∞–¥—Ä–µ—Å—É**: Fallback –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Å—Ç—Ä–∞–Ω—ã –≤ –∞–¥—Ä–µ—Å–µ
- **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `currency`

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞

#### 3.1 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

- **–§–∞–π–ª**: `webapp_full_report.html`
- **–ù–æ–≤—ã–π –±–ª–æ–∫**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç —Å –∫—É—Ä—Å–æ–º –∏ –¥–∞—Ç–æ–π
- **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**: –û—Ä–∞–Ω–∂–µ–≤—ã–π –±–ª–æ–∫ —Å –∏–∫–æ–Ω–∫–æ–π üí±

#### 3.2 –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

- **–§–∞–π–ª**: `app.py`
- **–ù–æ–≤–æ–µ –ø–æ–ª–µ**: `currency_info` –≤ `full_report_data`
- **–°–æ–¥–µ—Ä–∂–∏—Ç**: –°—Ç–∞—Ç—É—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏, –∫—É—Ä—Å –≤–∞–ª—é—Ç, –¥–∞—Ç—É

### 4. –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—É—Ä–µ—Ü–∫–æ–π –ª–æ–∫–∞—Ü–∏–∏
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã currency

```sql
CREATE TABLE public.currency (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  rub numeric NULL,
  usd numeric NULL,
  euro numeric NULL,
  try numeric NULL,
  aed numeric NULL,
  thb numeric NULL,
  CONSTRAINT currency_pkey PRIMARY KEY (id)
) TABLESPACE pg_default;
```

## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –æ–±—ä–µ–∫—Ç –≤ –¢—É—Ä—Ü–∏–∏
2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞**: –ò–∑ —Ç–∞–±–ª–∏—Ü—ã `currency` –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å TRY/EUR
3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ —Ü–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ: `EUR = TRY / –∫—É—Ä—Å`
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –í –æ—Ç—á–µ—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test_currency_conversion.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—É—Ä–µ—Ü–∫–æ–π –ª–æ–∫–∞—Ü–∏–∏
- –ü–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
python test_currency_conversion.py
```

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –î–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (–¥–∞–Ω–Ω—ã–µ –≤ TRY)
- –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ –∑–∞ –º¬≤: 50,000 TRY
- –ú–∏–Ω. —Ü–µ–Ω–∞ –∑–∞ –º¬≤: 40,000 TRY
- –ú–∞–∫—Å. —Ü–µ–Ω–∞ –∑–∞ –º¬≤: 60,000 TRY

### –ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (–∫—É—Ä—Å 1 EUR = 35 TRY)
- –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ –∑–∞ –º¬≤: ‚Ç¨1,428.57
- –ú–∏–Ω. —Ü–µ–Ω–∞ –∑–∞ –º¬≤: ‚Ç¨1,142.86
- –ú–∞–∫—Å. —Ü–µ–Ω–∞ –∑–∞ –º¬≤: ‚Ç¨1,714.29

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. `app.py` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
2. `webapp_full_report.html` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç—á–µ—Ç–∞
3. `currency_functions.py` - —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –≤–∞–ª—é—Ç–æ–π
4. `test_currency_conversion.py` - —Ç–µ—Å—Ç—ã (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
5. `CURRENCY_CONVERSION_UPDATE.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)

## –°—Ç–∞—Ç—É—Å

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**: –£–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞ "–ü–æ —Ç–∏–ø—É –¥–æ–º–∞"  
‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç –¥–ª—è —Ç—É—Ä–µ—Ü–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤  
‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ—Ç—á–µ—Ç–∞  
‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
