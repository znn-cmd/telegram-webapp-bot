# Обновление логики фильтрации трендов

## Описание изменений

Изменена логика отображения таблицы "Детальные данные трендов" в файле `webapp_object_evaluation.html`.

### Что было изменено

**Было:** Таблица показывала только 6 месяцев назад от текущего месяца и 1 месяц вперед (всего максимум 8 записей).

**Стало:** Таблица показывает данные за 18 месяцев назад от текущего месяца и 1 месяц вперед (расширенный диапазон для лучшего анализа трендов).

### Измененные функции

1. **`filterTrendsByDateRange(trends)`** - основная функция фильтрации
   - Убрана логика ограничения диапазона месяцев
   - Добавлена логика показа всех месяцев до текущего включительно
   - Убрано ограничение в 8 записей

2. **`initializeTrendsChart(trends)`** - инициализация графика трендов
   - Обновлена логика фильтрации для соответствия новой логике таблицы
   - Убрано ограничение "один месяц вперед"

3. **`switchChartType(chartType)`** - переключение типа графика
   - Обновлена логика фильтрации для соответствия новой логике

### Новая логика фильтрации

```javascript
// Вычисляем диапазон месяцев: 18 месяцев назад от текущего + 1 месяц вперед
const startMonth = currentMonth - 18;
const endMonth = currentMonth + 1;

const filteredTrends = currentYearTrends.filter(trend => {
    const month = trend.property_month;
    
    // Обрабатываем переход через год (например, если текущий месяц август, то startMonth = -10)
    if (startMonth <= 0) {
        // Если startMonth отрицательный, берем месяцы с конца предыдущего года
        return month >= (12 + startMonth) || month <= endMonth;
    } else {
        // Обычный случай
        return month >= startMonth && month <= endMonth;
    }
});
```

### Обновленный текст в таблице

Изменен текст информационной строки:
- **Было:** "Показано X из Y трендов"
- **Стало:** "Показано X трендов (все месяцы до M.YYYY)"

### Результат

Теперь таблица "Детальные данные трендов" будет показывать:
- Данные за 18 месяцев назад от текущего месяца (расширенный диапазон)
- Текущий месяц + 1 месяц вперед
- Максимум 8 трендов из отфильтрованного диапазона
- Прогнозные данные (будущие месяцы) отображаются в таблице
- Лучший анализ долгосрочных трендов благодаря расширенному диапазону

### Тестирование

Логика протестирована на тестовых данных:
- ✅ Корректно фильтрует тренды до текущего месяца
- ✅ Показывает все исторические данные
- ✅ Исключает прогнозные данные
- ✅ Сохраняет правильную сортировку по дате
