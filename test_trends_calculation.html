<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω —Ç—Ä–µ–Ω–¥–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .trends-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 12px;
        }
        .trends-table th {
            background: #28a745;
            color: white;
            padding: 8px 6px;
            text-align: center;
            font-weight: 600;
        }
        .trends-table td {
            padding: 6px 4px;
            text-align: center;
            border-bottom: 1px solid #dee2e6;
        }
        .trends-table .current-month-row {
            background-color: #e8f4fd;
            font-weight: 500;
        }
        .trends-table .forecast-row {
            background-color: #f0f8ff;
        }
        .trends-table .past-month-row {
            background-color: #f8f8f8;
        }
        .trends-table .filter-info td {
            text-align: center;
            font-size: 10.5px;
            color: #666;
            background: #f8f9fa;
            padding: 4px;
        }
        .calculation-details {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω —Ç—Ä–µ–Ω–¥–æ–≤</h1>
        
        <h2>–õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞:</h2>
        <ul>
            <li><strong>–ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ (–∞–≤–≥—É—Å—Ç):</strong> –°—Ä–µ–¥–Ω–µ–µ –º–µ–∂–¥—É avgMinSalePrice –∏ avgMaxSalePrice</li>
            <li><strong>–î–ª—è –±—É–¥—É—â–∏—Ö –º–µ—Å—è—Ü–µ–≤ (—Å–µ–Ω—Ç—è–±—Ä—å –∏ –¥–∞–ª–µ–µ):</strong> —Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ √ó (1 + –ø—Ä–æ—Ü–µ–Ω—Ç_–∏–∑–º–µ–Ω–µ–Ω–∏—è)</li>
            <li><strong>–î–ª—è –ø—Ä–æ—à–ª—ã—Ö –º–µ—Å—è—Ü–µ–≤ (–∏—é–ª—å –∏ —Ä–∞–Ω–µ–µ):</strong> —Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ √∑ (1 + –ø—Ä–æ—Ü–µ–Ω—Ç_–∏–∑–º–µ–Ω–µ–Ω–∏—è)</li>
        </ul>
        
        <h2>–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
        <button class="test-button" onclick="testTrendsCalculation()">–¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Ç—Ä–µ–Ω–¥–æ–≤</button>
        <button class="test-button" onclick="testWithRealData()">–¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</button>
        
        <div id="result" class="result"></div>
    </div>

    <script>
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥–æ–≤ (–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ)
        const testTrends = [
            {
                id: 1,
                date: '2025-09-01',
                property_year: 2025,
                property_month: 9,
                unit_price_for_sale: 38041.00,
                unit_price_for_rent: 245.40,
                price_change_sale: 0.0114, // +1.14%
                price_change_rent: 0.0298, // +2.98%
                yield: 7.74
            },
            {
                id: 2,
                date: '2025-08-01',
                property_year: 2025,
                property_month: 8,
                unit_price_for_sale: 37613.00,
                unit_price_for_rent: 238.29,
                price_change_sale: 0.0166, // +1.66%
                price_change_rent: 0.0264, // +2.64%
                yield: 7.60
            },
            {
                id: 3,
                date: '2025-07-01',
                property_year: 2025,
                property_month: 7,
                unit_price_for_sale: 37000.00,
                unit_price_for_rent: 232.16,
                price_change_sale: 0.0136, // +1.36%
                price_change_rent: 0.0199, // +1.99%
                yield: 7.53
            },
            {
                id: 4,
                date: '2025-06-01',
                property_year: 2025,
                property_month: 6,
                unit_price_for_sale: 36505.00,
                unit_price_for_rent: 227.62,
                price_change_sale: 0.0214, // +2.14%
                price_change_rent: 0.0244, // +2.44%
                yield: 7.48
            },
            {
                id: 5,
                date: '2025-05-01',
                property_year: 2025,
                property_month: 5,
                unit_price_for_sale: 35740.00,
                unit_price_for_rent: 222.20,
                price_change_sale: 0.0230, // +2.30%
                price_change_rent: 0.0140, // +1.40%
                yield: 7.46
            },
            {
                id: 6,
                date: '2025-04-01',
                property_year: 2025,
                property_month: 4,
                unit_price_for_sale: 34937.00,
                unit_price_for_rent: 219.14,
                price_change_sale: 0.0335, // +3.35%
                price_change_rent: 0.0177, // +1.77%
                yield: 7.53
            },
            {
                id: 7,
                date: '2025-03-01',
                property_year: 2025,
                property_month: 3,
                unit_price_for_sale: 33806.00,
                unit_price_for_rent: 215.33,
                price_change_sale: 0.0322, // +3.22%
                price_change_rent: 0.0098, // +0.98%
                yield: 7.64
            },
            {
                id: 8,
                date: '2025-02-01',
                property_year: 2025,
                property_month: 2,
                unit_price_for_sale: 32752.00,
                unit_price_for_rent: 213.23,
                price_change_sale: 0.0395, // +3.95%
                price_change_rent: 0.0223, // +2.23%
                yield: 7.81
            }
        ];

        // –ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ (–∞–≤–≥—É—Å—Ç)
        const basePrices = {
            avgSalePrice: 37613.00, // –°—Ä–µ–¥–Ω–µ–µ –º–µ–∂–¥—É min –∏ max
            avgRentPrice: 238.29    // –°—Ä–µ–¥–Ω–µ–µ –º–µ–∂–¥—É min –∏ max
        };

        // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
        function formatTrendDateShort(dateStr) {
            if (!dateStr) return '';
            try {
                const date = new Date(dateStr);
                const monthNames = [
                    '—è–Ω–≤', '—Ñ–µ–≤', '–º–∞—Ä', '–∞–ø—Ä', '–º–∞–π', '–∏—é–Ω',
                    '–∏—é–ª', '–∞–≤–≥', '—Å–µ–Ω', '–æ–∫—Ç', '–Ω–æ—è', '–¥–µ–∫'
                ];
                
                const month = monthNames[date.getMonth()];
                const year = date.getFullYear();
                return `${month}. ${year}`;
            } catch (e) {
                return dateStr;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        function formatPercentage(value) {
            if (value === null || value === undefined) return '-';
            const numValue = parseFloat(value);
            if (isNaN(numValue)) return '-';
            const sign = numValue >= 0 ? '+' : '';
            return `${sign}${(numValue * 100).toFixed(2)}%`;
        }

        // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
        function formatTrendValue(value, type) {
            if (value === null || value === undefined) return '-';
            const numValue = parseFloat(value);
            if (isNaN(numValue)) return '-';
            
            if (type === 'price') {
                return numValue.toLocaleString('ru-RU', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                });
            } else if (type === 'percentage') {
                return `${numValue.toFixed(2)}%`;
            }
            return numValue.toString();
        }

        // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
        function calculateTrendPrices(trends, baseSalePrice, baseRentPrice) {
            const currentYear = 2025;
            const currentMonth = 8; // –ê–≤–≥—É—Å—Ç
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ç—Ä–µ–Ω–¥—ã –ø–æ –¥–∞—Ç–µ
            const sortedTrends = trends.sort((a, b) => {
                if (a.property_year !== b.property_year) {
                    return a.property_year - b.property_year;
                }
                return a.property_month - b.property_month;
            });

            console.log('üí∞ Base prices for current month:', { baseSalePrice, baseRentPrice });
            
            const calculatedTrends = sortedTrends.map(trend => {
                const isCurrentMonth = trend.property_year === currentYear && trend.property_month === currentMonth;
                const isFutureMonth = trend.property_year > currentYear || (trend.property_year === currentYear && trend.property_month > currentMonth);
                const isPastMonth = trend.property_year < currentYear || (trend.property_year === currentYear && trend.property_month < currentMonth);
                
                let salePrice = baseSalePrice;
                let rentPrice = baseRentPrice;
                let calculationDetails = '';
                
                if (isCurrentMonth) {
                    // –¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü - –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã
                    calculationDetails = `–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü: –±–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã`;
                    console.log(`üìä Current month ${trend.property_month}: sale=${salePrice.toFixed(2)}, rent=${rentPrice.toFixed(2)}`);
                } else if (isFutureMonth) {
                    // –ë—É–¥—É—â–∏–µ –º–µ—Å—è—Ü—ã: —Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ √ó (1 + –ø—Ä–æ—Ü–µ–Ω—Ç_–∏–∑–º–µ–Ω–µ–Ω–∏—è)
                    let saleMultiplier = 1;
                    let rentMultiplier = 1;
                    
                    // –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ –¥–æ –±—É–¥—É—â–µ–≥–æ
                    for (let i = 0; i < sortedTrends.length; i++) {
                        const checkTrend = sortedTrends[i];
                        if (checkTrend.property_year === trend.property_year && checkTrend.property_month === trend.property_month) {
                            break; // –î–æ—Å—Ç–∏–≥–ª–∏ —Ü–µ–ª–µ–≤–æ–≥–æ –º–µ—Å—è—Ü–∞
                        }
                        
                        if (checkTrend.property_year >= currentYear && checkTrend.property_month >= currentMonth) {
                            if (checkTrend.price_change_sale !== null && checkTrend.price_change_sale !== undefined) {
                                saleMultiplier *= (1 + checkTrend.price_change_sale);
                            }
                            if (checkTrend.price_change_rent !== null && checkTrend.price_change_rent !== undefined) {
                                rentMultiplier *= (1 + checkTrend.price_change_rent);
                            }
                        }
                    }
                    
                    salePrice = baseSalePrice * saleMultiplier;
                    rentPrice = baseRentPrice * rentMultiplier;
                    
                    calculationDetails = `–ë—É–¥—É—â–∏–π: ${baseSalePrice.toFixed(2)} √ó ${saleMultiplier.toFixed(4)} = ${salePrice.toFixed(2)}`;
                    console.log(`üìä Future month ${trend.property_month}: sale=${salePrice.toFixed(2)}, rent=${rentPrice.toFixed(2)}, multiplier=${saleMultiplier.toFixed(4)}`);
                    
                } else if (isPastMonth) {
                    // –ü—Ä–æ—à–ª—ã–µ –º–µ—Å—è—Ü—ã: —Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ √∑ (1 + –ø—Ä–æ—Ü–µ–Ω—Ç_–∏–∑–º–µ–Ω–µ–Ω–∏—è)
                    let saleDivider = 1;
                    let rentDivider = 1;
                    
                    // –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –ø—Ä–æ—à–ª–æ–≥–æ –º–µ—Å—è—Ü–∞ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ
                    for (let i = sortedTrends.length - 1; i >= 0; i--) {
                        const checkTrend = sortedTrends[i];
                        if (checkTrend.property_year === trend.property_year && checkTrend.property_month === trend.property_month) {
                            break; // –î–æ—Å—Ç–∏–≥–ª–∏ —Ü–µ–ª–µ–≤–æ–≥–æ –º–µ—Å—è—Ü–∞
                        }
                        
                        if (checkTrend.property_year <= currentYear && checkTrend.property_month <= currentMonth) {
                            if (checkTrend.price_change_sale !== null && checkTrend.price_change_sale !== undefined) {
                                saleDivider *= (1 + checkTrend.price_change_sale);
                            }
                            if (checkTrend.price_change_rent !== null && checkTrend.price_change_rent !== undefined) {
                                rentDivider *= (1 + checkTrend.price_change_rent);
                            }
                        }
                    }
                    
                    salePrice = baseSalePrice / saleDivider;
                    rentPrice = baseRentPrice / rentDivider;
                    
                    calculationDetails = `–ü—Ä–æ—à–ª—ã–π: ${baseSalePrice.toFixed(2)} √∑ ${saleDivider.toFixed(4)} = ${salePrice.toFixed(2)}`;
                    console.log(`üìä Past month ${trend.property_month}: sale=${salePrice.toFixed(2)}, rent=${rentPrice.toFixed(2)}, divider=${saleDivider.toFixed(4)}`);
                }
                
                return {
                    ...trend,
                    calculatedSalePrice: salePrice,
                    calculatedRentPrice: rentPrice,
                    calculationDetails: calculationDetails
                };
            });
            
            return calculatedTrends;
        }

        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–µ–Ω–¥–æ–≤
        function generateTrendsTable(calculatedTrends) {
            let html = '<table class="trends-table">';
            html += '<thead><tr>';
            html += '<th>–î–∞—Ç–∞</th>';
            html += '<th>–ü—Ä–æ–¥–∞–∂–∞<br>(‚Ç∫/–º¬≤)</th>';
            html += '<th>–ò–∑–º-–∏–µ —Ü–µ–Ω—ã<br>–ø—Ä–æ–¥–∞–∂–∏</th>';
            html += '<th>–ê—Ä–µ–Ω–¥–∞<br>(‚Ç∫/–º¬≤)</th>';
            html += '<th>–ò–∑–º-–∏–µ —Ü–µ–Ω—ã<br>–∞—Ä–µ–Ω–¥—ã</th>';
            html += '<th>–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</th>';
            html += '</tr></thead><tbody>';
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
            html += `<tr class="filter-info"><td colspan="6">
                –ü–æ–∫–∞–∑–∞–Ω–æ ${calculatedTrends.length} –∏–∑ ${calculatedTrends.length} —Ç—Ä–µ–Ω–¥–æ–≤
            </td></tr>`;
            
            calculatedTrends.forEach(trend => {
                const isCurrentMonth = trend.property_year === 2025 && trend.property_month === 8;
                const isFutureMonth = trend.property_month > 8;
                const isPastMonth = trend.property_month < 8;
                
                let rowClass = '';
                let rowStyle = '';
                
                if (isCurrentMonth) {
                    rowClass = 'current-month-row';
                } else if (isFutureMonth) {
                    rowClass = 'forecast-row';
                } else if (isPastMonth) {
                    rowClass = 'past-month-row';
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –º–µ—Å—è—Ü–µ–≤
                if (trend.property_month >= 6 && trend.property_month <= 8) {
                    rowStyle = 'border-top: 2px solid #007bff;';
                }
                
                html += `<tr class="${rowClass}" style="${rowStyle}">`;
                html += `<td>${formatTrendDateShort(trend.date)}</td>`;
                html += `<td>${formatTrendValue(trend.calculatedSalePrice, 'price')}</td>`;
                html += `<td>${formatPercentage(trend.price_change_sale)}</td>`;
                html += `<td>${formatTrendValue(trend.calculatedRentPrice, 'price')}</td>`;
                html += `<td>${formatPercentage(trend.price_change_rent)}</td>`;
                html += `<td>${formatTrendValue(trend.yield, 'percentage')}</td>`;
                html += '</tr>';
            });
            
            html += '</tbody></table>';
            return html;
        }

        // –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å—á–µ—Ç–∞ —Ç—Ä–µ–Ω–¥–æ–≤
        function testTrendsCalculation() {
            console.log('üß™ Testing trends calculation...');
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—ã
            const calculatedTrends = calculateTrendPrices(testTrends, basePrices.avgSalePrice, basePrices.avgRentPrice);
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É
            const tableHtml = generateTrendsTable(calculatedTrends);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            document.getElementById('result').innerHTML = `
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á–µ—Ç–∞:</h3>
                ${tableHtml}
                
                <div class="calculation-details">
                    <h4>–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–æ–≤:</h4>
                    ${calculatedTrends.map(trend => `
                        <div><strong>${formatTrendDateShort(trend.date)}:</strong> ${trend.calculationDetails}</div>
                    `).join('')}
                </div>
            `;
            
            console.log('‚úÖ Trends calculation test completed');
        }

        // –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        function testWithRealData() {
            console.log('üß™ Testing with real data...');
            
            // –°–∏–º—É–ª–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –±–∞–∑–æ–≤—ã–º–∏ —Ü–µ–Ω–∞–º–∏
            const realBasePrices = {
                avgSalePrice: 37613.00, // –°—Ä–µ–¥–Ω–µ–µ –º–µ–∂–¥—É avgMinSalePrice –∏ avgMaxSalePrice
                avgRentPrice: 238.29    // –°—Ä–µ–¥–Ω–µ–µ –º–µ–∂–¥—É avgMinRentPrice –∏ avgMaxRentPrice
            };
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—ã
            const calculatedTrends = calculateTrendPrices(testTrends, realBasePrices.avgSalePrice, realBasePrices.avgRentPrice);
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É
            const tableHtml = generateTrendsTable(calculatedTrends);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            document.getElementById('result').innerHTML = `
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:</h3>
                <p><strong>–ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã –∞–≤–≥—É—Å—Ç–∞:</strong> –ü—Ä–æ–¥–∞–∂–∞: ${realBasePrices.avgSalePrice.toLocaleString('ru-RU')} ‚Ç∫/–º¬≤, –ê—Ä–µ–Ω–¥–∞: ${realBasePrices.avgRentPrice.toFixed(2)} ‚Ç∫/–º¬≤</p>
                ${tableHtml}
                
                <div class="calculation-details">
                    <h4>–ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤:</h4>
                    <div><strong>–°–µ–Ω—Ç—è–±—Ä—å (–ø—Ä–æ–¥–∞–∂–∞):</strong> ${realBasePrices.avgSalePrice.toFixed(2)} √ó (1 + 0.0114) = ${(realBasePrices.avgSalePrice * 1.0114).toFixed(2)} ‚Ç∫/–º¬≤</div>
                    <div><strong>–ò—é–ª—å (–ø—Ä–æ–¥–∞–∂–∞):</strong> ${realBasePrices.avgSalePrice.toFixed(2)} √∑ (1 + 0.0166) = ${(realBasePrices.avgSalePrice / 1.0166).toFixed(2)} ‚Ç∫/–º¬≤</div>
                </div>
            `;
            
            console.log('‚úÖ Real data test completed');
        }
    </script>
</body>
</html>
