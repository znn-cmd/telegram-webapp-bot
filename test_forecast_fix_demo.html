<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å –≥—Ä–∞—Ñ–∏–∫–æ–º –ø—Ä–æ–≥–Ω–æ–∑–∞</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
            text-align: center;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .highlight {
            background: #ff6b6b;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .fix {
            background: #51cf66;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .explanation {
            background: #e8f4fd;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
        }
        .problem-list {
            background: #fee;
            border-left: 4px solid #d00;
            padding: 15px;
            margin: 20px 0;
        }
        .solution-list {
            background: #efe;
            border-left: 4px solid #080;
            padding: 15px;
            margin: 20px 0;
        }
        ul {
            margin: 10px 0;
            padding-left: 30px;
        }
        li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–µ–π –∏ –≥—Ä–∞—Ñ–∏–∫–æ–º –ø—Ä–æ–≥–Ω–æ–∑–∞</h1>
        
        <div class="section">
            <h2>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</h2>
            <div class="problem-list">
                <h3>–ü—Ä–æ–±–ª–µ–º–∞:</h3>
                <p>–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–º –≤ —Ç–∞–±–ª–∏—Ü–µ.</p>
                <ul>
                    <li>–í —Ç–∞–±–ª–∏—Ü–µ –¥–ª—è –∞–≤–≥—É—Å—Ç–∞ 2025: <strong>‚Ç∫53 190,02/–º¬≤</strong></li>
                    <li>–ù–∞ –≥—Ä–∞—Ñ–∏–∫–µ –¥–ª—è —Å–µ–Ω—Ç—è–±—Ä—è 2025: <strong>‚Ç∫53 881,493/–º¬≤</strong> (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã</h2>
            <div class="explanation">
                <p><strong>–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:</strong> –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∞ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –æ—Ç–¥–µ–ª—å–Ω–æ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é.</p>
                
                <h4>–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:</h4>
                <div class="code-block">
// –í —Ñ—É–Ω–∫—Ü–∏–∏ generateForecastTable:

// 1. –°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
<span class="highlight">const trendsWithHistoricalPrices = await prepareTrendsWithHistoricalPrices(trends);</span>
const forecastTrends = trendsWithHistoricalPrices.filter(...);

// 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É —Å —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
forecastHtml += generateTableHTML(forecastTrends);

// 3. –ü–æ—Ç–æ–º –°–ù–û–í–ê –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞!
setTimeout(async () => {
    <span class="highlight">const trendsWithHistoricalPrices = await prepareTrendsWithHistoricalPrices(trends);</span>
    const forecastTrends = trendsWithHistoricalPrices.filter(...);
    initializeForecastChart(forecastTrends);
}, 100);
                </div>
                
                <p>–§—É–Ω–∫—Ü–∏—è <code>prepareTrendsWithHistoricalPrices</code> –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö –∏–∑-–∑–∞:</p>
                <ul>
                    <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–µ—à–∞ —Å –∏–∑–º–µ–Ω—è—é—â–∏–º–∏—Å—è –¥–∞–Ω–Ω—ã–º–∏</li>
                    <li>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å API</li>
                    <li>–†–∞—Å—á–µ—Ç–æ–≤, –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç –≤—Ä–µ–º–µ–Ω–∏</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>–†–µ—à–µ–Ω–∏–µ</h2>
            <div class="solution-list">
                <h3>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</h3>
                <p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∞.</p>
                
                <h4>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:</h4>
                <div class="code-block">
// –í —Ñ—É–Ω–∫—Ü–∏–∏ generateForecastTable:

// 1. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –û–î–ò–ù –†–ê–ó
const trendsWithHistoricalPrices = await prepareTrendsWithHistoricalPrices(trends);
const forecastTrends = trendsWithHistoricalPrices.filter(...);

// 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É —Å —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
forecastHtml += generateTableHTML(forecastTrends);

// 3. –ò—Å–ø–æ–ª—å–∑—É–µ–º –¢–ï –ñ–ï –î–ê–ù–ù–´–ï –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
setTimeout(() => {
    if (forecastTrends.length > 0) {
        console.log('üìä Initializing forecast chart with <span class="fix">the same data as table</span>:', forecastTrends.length, 'records');
        <span class="fix">initializeForecastChart(forecastTrends);</span>
    }
}, 100);
                </div>
            </div>
        </div>

        <div class="section">
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
            <div class="explanation">
                <h3>–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</h3>
                <ul>
                    <li>‚úÖ –¢–∞–±–ª–∏—Ü–∞ –∏ –≥—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ</li>
                    <li>‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü–µ</li>
                    <li>‚úÖ –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö</li>
                    <li>‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–æ–¥–∏–Ω –≤—ã–∑–æ–≤ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö)</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
            <div class="explanation">
                <h3>–î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ –±—É–¥—É—â–µ–º:</h3>
                <ol>
                    <li><strong>–ü—Ä–∏–Ω—Ü–∏–ø DRY (Don't Repeat Yourself):</strong> –ù–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö</li>
                    <li><strong>–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:</strong> –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞ + –≥—Ä–∞—Ñ–∏–∫)</li>
                    <li><strong>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –î–æ–±–∞–≤–ª—è–π—Ç–µ console.log –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö</li>
                    <li><strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏</li>
                </ol>
            </div>
        </div>
    </div>
</body>
</html>