# üåê –†–µ—à–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º Google Maps API

## ‚úÖ –°—Ç–∞—Ç—É—Å
**Google Maps API –≤–∫–ª—é—á–µ–Ω –æ–±—Ä–∞—Ç–Ω–æ** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞.

## üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (3 –ø–æ–ø—ã—Ç–∫–∏)
- –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç –¥–æ 30 —Å–µ–∫—É–Ω–¥
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

### 2. **–£–ª—É—á—à–µ–Ω fallback –º–µ—Ö–∞–Ω–∏–∑–º**
- Google Maps API ‚Üí Nominatim API ‚Üí –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–∞–∂–µ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `ConnectionError`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `TimeoutError`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `RequestException`

## üö® –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: `Network is unreachable`
```
‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Google Maps API: 
Network is unreachable [Errno 101]
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. **Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**
2. **–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
3. **DNS –ø—Ä–æ–±–ª–µ–º—ã**
4. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

## üîß –†–µ—à–µ–Ω–∏—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Google Maps API
curl -v https://maps.googleapis.com/maps/api/geocode/json

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS
nslookup maps.googleapis.com

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
echo $http_proxy
echo $https_proxy
```

### 2. **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)**
```yaml
# docker-compose.yml
services:
  app:
    # –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–æ—Å—Ç-—Å–µ—Ç—å
    network_mode: "host"
    
    # –í–∞—Ä–∏–∞–Ω—Ç 2: –î–æ–±–∞–≤–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏
    extra_hosts:
      - "maps.googleapis.com:142.250.185.78"
      - "maps.googleapis.com:142.250.185.79"
    
    # –í–∞—Ä–∏–∞–Ω—Ç 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS
    dns:
      - 8.8.8.8
      - 8.8.4.4
```

### 3. **Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
```bash
# Ubuntu/Debian
sudo ufw allow out 443/tcp
sudo ufw allow out 80/tcp

# CentOS/RHEL
sudo firewall-cmd --add-port=443/tcp --permanent
sudo firewall-cmd --add-port=80/tcp --permanent
sudo firewall-cmd --reload
```

### 4. **–ü—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
export http_proxy=http://proxy:port
export https_proxy=http://proxy:port

# –ò–ª–∏ –≤ docker-compose.yml
environment:
  - http_proxy=http://proxy:port
  - https_proxy=http://proxy:port
```

### 5. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ DNS**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ /etc/resolv.conf
nameserver 8.8.8.8
nameserver 8.8.4.4
nameserver 1.1.1.1
```

## üéØ –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
ENABLE_GOOGLE_MAPS=true      # Google Maps API –≤–∫–ª—é—á–µ–Ω
GOOGLE_MAPS_TIMEOUT=30       # –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥
ENABLE_NOMINATIM=true        # Nominatim –∫–∞–∫ fallback
NOMINATIM_TIMEOUT=15         # –¢–∞–π–º–∞—É—Ç Nominatim 15 —Å–µ–∫—É–Ω–¥
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. **Google Maps API** (–æ—Å–Ω–æ–≤–Ω–æ–π, 3 –ø–æ–ø—ã—Ç–∫–∏)
2. **Nominatim API** (fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö Google Maps)
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (–ø–æ—Å–ª–µ–¥–Ω–∏–π fallback)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```
üåê Google Maps API –≤–∫–ª—é—á–µ–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å...
üîÑ –ü–æ–ø—ã—Ç–∫–∞ 1/3: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º HTTP –∑–∞–ø—Ä–æ—Å –∫ Google Maps API...
üì° –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ Google Maps API: 200
‚úÖ –ì–ï–û–ö–û–î–ò–ù–ì –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û (Google Maps API)
```

### –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
```
‚ùå –ü–æ–ø—ã—Ç–∫–∞ 1: –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è Google Maps API: [Errno 101] Network is unreachable
üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ Nominatim API –∫–∞–∫ fallback...
‚úÖ –ì–ï–û–ö–û–î–ò–ù–ì –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û (fallback –Ω–∞ Nominatim)
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Google Maps API —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ fallback –Ω–∞ Nominatim
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≥–µ–æ–∫–æ–¥–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

### 3. **–ü—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall/–ø—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 4. **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è**
```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ Google Maps API
export ENABLE_GOOGLE_MAPS=false

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
export ENABLE_GOOGLE_MAPS=false
export ENABLE_NOMINATIM=false
```

## üìã –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- **–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** - –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **DevOps –∫–æ–º–∞–Ω–¥–∞** - –¥–ª—è Docker/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–°–µ—Ç–µ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞** - –¥–ª—è firewall/–ø—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º:
- Google Maps API –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –ì–µ–æ–∫–æ–¥–∏–Ω–≥ –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä—ã–º –∏ —Ç–æ—á–Ω—ã–º
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º –æ–±–µ—Å–ø–µ—á–∏—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–∞—Ç—å
