# Детальное описание расчетов в отчете по анализу объекта

## 1. Основные показатели и источники данных

### 1.1 Консолидированная оценка объекта

Система использует взвешенный подход для оценки объекта, учитывая следующие параметры с их весовыми коэффициентами:

- Количество комнат (спальни): 40% от общей оценки
- Возраст объекта: 30% от общей оценки
- Этажность: 20% от общей оценки
- Тип отопления: 10% от общей оценки

#### Формула расчета:
```
Итоговая оценка = (Оценка_комнат × 0.4) + (Оценка_возраста × 0.3) + (Оценка_этажа × 0.2) + (Оценка_отопления × 0.1)
```

При отсутствии какого-либо показателя, его вес распределяется пропорционально между остальными показателями.

### 1.2 Цены за квадратный метр

#### Цена продажи (Unit Price For Sale):
- Берется из таблиц данных по каждому параметру
- Рассчитывается средневзвешенное значение с учетом коэффициентов важности
- При отсутствии данных по какому-либо параметру, его вес перераспределяется

#### Цена аренды (Unit Price For Rent):
- Аналогичный расчет как для цены продажи
- Нулевые значения исключаются из расчета
- Итоговая цена корректируется с учетом только валидных показателей

## 2. Прогнозирование и тренды

### 2.1 Расчет исторических цен
```javascript
Исторические цены рассчитываются на основе:
- Данных за последние 12 месяцев
- Текущего месяца
- Прогноза на будущие периоды
```

### 2.2 Прогноз цен
Система анализирует:
- Текущий год и месяц
- Данные за предыдущий период
- Тренды изменения цен
- Сезонные колебания

Формула прогноза:
```
Прогнозная цена = Базовая цена × (1 + Коэффициент_тренда) + Сезонная_корректировка
```

## 3. Анализ доходности

### 3.1 Расчет ROI для краткосрочной аренды:
```python
Месячный доход = Цена_за_ночь × 20 (среднее количество ночей)
Годовой ROI = (Месячный_доход × 12) / (Цена_объекта) × 100%
```

### 3.2 Расчет ROI для долгосрочной аренды:
```python
Годовой ROI = (Месячная_аренда × 12) / Цена_объекта × 100%
```

## 4. Рыночные рекомендации

Система автоматически генерирует рекомендации на основе следующих критериев:

### 4.1 Анализ цены:
- Если цена < 80% от средней рыночной: "Цена ниже рыночной на 20%+"
- Если цена > 120% от средней рыночной: "Цена выше рыночной на 20%+"
- В остальных случаях: "Цена в пределах рыночного диапазона"

### 4.2 Анализ доходности:
- ROI > 8%: "Высокая доходность"
- ROI 5-8%: "Средняя доходность"
- ROI < 5%: "Низкая доходность"

## 5. Источники данных

### 5.1 Основные таблицы данных:
1. Общие данные (general_data)
2. Данные по комнатам (bedrooms_data)
3. Данные по возрасту объектов (age_data)
4. Данные по типу отопления (heating_data)

### 5.2 Дополнительные источники:
- Исторические данные по ценам
- Данные о трендах рынка
- Сезонные коэффициенты
- Региональные корректировки

## 6. Обновление данных

- Цены обновляются ежемесячно
- Тренды пересчитываются еженедельно
- Прогнозы корректируются при получении новых данных
- Региональные коэффициенты обновляются ежеквартально