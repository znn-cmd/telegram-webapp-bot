<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Улучшенный блок "Прогноз цен"</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f0f2f5;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .old-style, .new-style {
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 20px;
        }
        
        .old-style {
            border-color: #dc3545;
        }
        
        .new-style {
            border-color: #28a745;
        }
        
        .style-title {
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
        }
        
        .old-style .style-title {
            background: #f8d7da;
            color: #721c24;
        }
        
        .new-style .style-title {
            background: #d4edda;
            color: #155724;
        }
        
        /* Enhanced Price Forecast Block Styles */
        .price-forecast-enhanced-block {
            margin-top: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 16px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .price-forecast-enhanced-content {
            padding: 25px 30px;
            position: relative;
        }
        
        .price-forecast-enhanced-content::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 6px;
            background: linear-gradient(45deg, #28a745, #20c997);
        }
        
        .price-forecast-enhanced-title {
            font-size: 18px;
            font-weight: 700;
            color: #333333;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .price-forecast-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .price-forecast-column {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .price-forecast-column.current {
            border-left: 4px solid #6c757d;
        }
        
        .price-forecast-column.future {
            border-left: 4px solid #28a745;
        }
        
        .price-column-title {
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .price-forecast-value-section {
            margin-bottom: 15px;
        }
        
        .price-forecast-value-section:last-child {
            margin-bottom: 0;
        }
        
        .price-forecast-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .price-forecast-value {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .price-forecast-value.current {
            color: #495057;
        }
        
        .price-forecast-value.future {
            color: #28a745;
        }
        
        .price-growth {
            font-size: 12px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
        }
        
        .price-growth.positive {
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
        }
        
        .price-growth.negative {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
        }
        
        .forecast-metrics-section {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .forecast-metrics-title {
            font-size: 16px;
            font-weight: 600;
            color: #333333;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .forecast-metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .metric-item {
            text-align: center;
            padding: 12px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }
        
        .metric-label {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 5px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .metric-value {
            font-size: 16px;
            font-weight: 700;
            color: #333333;
        }
        
        .metric-value.positive {
            color: #28a745;
        }
        
        .metric-value.negative {
            color: #dc3545;
        }
        
        /* Compact Price Forecast Block Styles */
        .price-forecast-compact-block {
            margin-top: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 16px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .price-forecast-compact-content {
            padding: 20px 25px;
            position: relative;
        }
        
        .price-forecast-compact-content::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 6px;
            background: linear-gradient(45deg, #28a745, #20c997);
        }
        
        .price-forecast-compact-title {
            font-size: 18px;
            font-weight: 700;
            color: #333333;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .price-forecast-compact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .price-forecast-compact-column {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .price-forecast-compact-column.current {
            border-left: 4px solid #6c757d;
        }
        
        .price-forecast-compact-column.future {
            border-left: 4px solid #28a745;
        }
        
        .price-column-compact-title {
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 12px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .price-forecast-compact-section {
            margin-bottom: 10px;
        }
        
        .price-forecast-compact-section:last-child {
            margin-bottom: 0;
        }
        
        .price-forecast-compact-label {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 3px;
            font-weight: 500;
        }
        
        .price-forecast-compact-value {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 3px;
        }
        
        .price-forecast-compact-value.user {
            color: #007bff;
        }
        
        .price-forecast-compact-value.market {
            color: #495057;
        }
        
        .price-forecast-compact-value.rent {
            color: #6f42c1;
        }
        
        .price-forecast-compact-value.future {
            color: #28a745;
        }
        
        .price-comparison {
            font-size: 11px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 8px;
            display: inline-block;
        }
        
        .price-comparison.market-higher {
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
        }
        
        .price-comparison.market-lower {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
        }
        
        .price-growth-dual {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .price-growth-dual .price-growth {
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 8px;
        }
        
        .forecast-metrics-compact-section {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .forecast-metrics-compact-title {
            font-size: 15px;
            font-weight: 600;
            color: #333333;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .forecast-metrics-compact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .metric-compact-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }
        
        .metric-compact-label {
            font-size: 11px;
            color: #6c757d;
            font-weight: 500;
        }
        
        .metric-compact-value {
            font-size: 13px;
            font-weight: 700;
            color: #333333;
        }
        
        .metric-compact-value.positive {
            color: #28a745;
        }
        
        .metric-compact-value.negative {
            color: #dc3545;
        }
        
        .price-forecast-date {
            font-size: 14px;
            color: #666666;
            margin-bottom: 8px;
            font-weight: 600;
            text-align: center;
        }
        
        .price-forecast-currency-info {
            font-size: 12px;
            color: #999999;
            font-style: italic;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .price-forecast-disclaimer {
            font-size: 11px;
            color: #cccccc;
            font-style: italic;
            margin-top: 8px;
            line-height: 1.3;
            text-align: center;
        }
        
        /* Old simple block styles for comparison */
        .price-forecast-block {
            margin-top: 20px;
            background: #f8f9fa;
            border-radius: 16px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            overflow: hidden;
            position: relative;
        }
        
        .price-forecast-content {
            padding: 25px 30px;
            text-align: center;
            position: relative;
        }
        
        .price-forecast-content::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 6px;
            background: #28a745;
        }
        
        .price-forecast-title {
            font-size: 18px;
            font-weight: 700;
            color: #333333;
            margin-bottom: 20px;
        }
        
        .price-forecast-sale-section,
        .price-forecast-rent-section {
            margin-bottom: 16px;
        }
        
        .price-forecast-sale-label,
        .price-forecast-rent-label {
            font-size: 15px;
            color: #333333;
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .price-forecast-sale-value,
        .price-forecast-rent-value {
            font-size: 20px;
            font-weight: 700;
            color: #28a745;
            margin-bottom: 8px;
        }
        
        .features {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid #28a745;
            margin-bottom: 30px;
        }
        
        .features h3 {
            color: #155724;
            margin-top: 0;
        }
        
        .features ul {
            color: #155724;
            margin: 0;
        }
        
        .features li {
            margin: 8px 0;
        }
        
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .price-forecast-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .forecast-metrics-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📊 Компактный блок "Прогноз цен" с ценой пользователя</h1>
        
        <div class="comparison">
            <div class="old-style">
                <div class="style-title">❌ Старый простой блок</div>
                
                <div class="price-forecast-block">
                    <div class="price-forecast-content">
                        <h4 class="price-forecast-title">Прогноз цен</h4>
                        
                        <div class="price-forecast-sale-section">
                            <div class="price-forecast-sale-label">Цена продажи</div>
                            <div class="price-forecast-sale-value">€3 910 885,00</div>
                        </div>
                        
                        <div class="price-forecast-rent-section">
                            <div class="price-forecast-rent-label">Ставка аренды</div>
                            <div class="price-forecast-rent-value">€19 548,65/мес</div>
                        </div>
                        
                        <div class="price-forecast-date">июнь 2026</div>
                        <div class="price-forecast-currency-info">Курс: 1 EUR = ₺48.26</div>
                    </div>
                </div>
                
                <div style="margin-top: 15px; font-size: 14px; color: #666;">
                    <strong>Проблемы:</strong>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li>🚫 Только конечная цена, нет динамики</li>
                        <li>🚫 Нет метрик ROI и окупаемости</li>
                        <li>🚫 Жесткий курс валют</li>
                        <li>🚫 Простой дизайн</li>
                        <li>🚫 Нет рассчитанных цен</li>
                    </ul>
                </div>
            </div>
            
            <div class="new-style">
                <div class="style-title">✅ Новый компактный блок</div>
                
                <div class="price-forecast-compact-block">
                    <div class="price-forecast-compact-content">
                        <h4 class="price-forecast-compact-title">Прогноз цен</h4>
                        
                        <div class="price-forecast-compact-grid">
                            <div class="price-forecast-compact-column current">
                                <div class="price-column-compact-title">Текущая стоимость</div>
                                
                                <div class="price-forecast-compact-section">
                                    <div class="price-forecast-compact-label">Цена продажи</div>
                                    <div class="price-forecast-compact-value user">€69 312</div>
                                </div>
                                
                                <div class="price-forecast-compact-section">
                                    <div class="price-forecast-compact-label">Расчетная цена текущего рынка</div>
                                    <div class="price-forecast-compact-value market">€69 312</div>
                                    <div class="price-comparison market-higher">+16.9%</div>
                                </div>
                                
                                <div class="price-forecast-compact-section">
                                    <div class="price-forecast-compact-label">Ставка аренды</div>
                                    <div class="price-forecast-compact-value rent">€348/мес</div>
                                </div>
                            </div>
                            
                            <div class="price-forecast-compact-column future">
                                <div class="price-column-compact-title">Прогнозная стоимость</div>
                                
                                <div class="price-forecast-compact-section">
                                    <div class="price-forecast-compact-label">Цена продажи</div>
                                    <div class="price-forecast-compact-value future">€81 029</div>
                                    <div class="price-growth-dual">
                                        <div class="price-growth positive">от пользователя: +16.9%</div>
                                        <div class="price-growth positive">от рынка: +16.9%</div>
                                    </div>
                                </div>
                                
                                <div class="price-forecast-compact-section">
                                    <div class="price-forecast-compact-label">Ставка аренды</div>
                                    <div class="price-forecast-compact-value future">€405/мес</div>
                                    <div class="price-growth positive">+16.2%</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="forecast-metrics-compact-section">
                            <h5 class="forecast-metrics-compact-title">Ключевые показатели</h5>
                            <div class="forecast-metrics-compact-grid">
                                <div class="metric-compact-item">
                                    <span class="metric-compact-label">Средняя доходность:</span>
                                    <span class="metric-compact-value">5.9%</span>
                                </div>
                                <div class="metric-compact-item">
                                    <span class="metric-compact-label">ROI за период:</span>
                                    <span class="metric-compact-value positive">+16.9%</span>
                                </div>
                                <div class="metric-compact-item">
                                    <span class="metric-compact-label">Срок окупаемости:</span>
                                    <span class="metric-compact-value">16.7 лет</span>
                                </div>
                                <div class="metric-compact-item">
                                    <span class="metric-compact-label">Период прогноза:</span>
                                    <span class="metric-compact-value">10 мес.</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="price-forecast-date">июнь 2026</div>
                        <div class="price-forecast-currency-info">Курс: 1 EUR = ₺48.26</div>
                        <div class="price-forecast-disclaimer">прогноз сделан на основании текущей динамики и очищен от инфляции и курсовых разниц, актуален на 24.08.2025</div>
                    </div>
                </div>
                
                <div style="margin-top: 15px; font-size: 14px; color: #666;">
                    <strong>Преимущества:</strong>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li>✅ <strong>Цена пользователя:</strong> Показывает цену объекта от пользователя</li>
                        <li>✅ <strong>Рыночная цена:</strong> "Расчетная цена текущего рынка"</li>
                        <li>✅ <strong>Сравнение:</strong> Разница между ценой пользователя и рынком в %</li>
                        <li>✅ <strong>Двойной прирост:</strong> % от цены пользователя И от рыночной цены</li>
                        <li>✅ <strong>Компактность:</strong> Более плотная подача информации</li>
                        <li>✅ <strong>Метрики в 2 столбца:</strong> ROI, доходность, окупаемость</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="features">
            <h3>🎯 Реализованные улучшения:</h3>
            <ul>
                <li><strong>✅ Компактность:</strong> Уменьшены отступы, более плотная подача информации</li>
                <li><strong>✅ Цена пользователя:</strong> Добавлена "Цена продажи" от пользователя в текущей стоимости</li>
                <li><strong>✅ Переименование:</strong> "Цена продажи" → "Расчетная цена текущего рынка"</li>
                <li><strong>✅ Сравнение с рынком:</strong> Показывает разницу между ценой пользователя и рынком в %</li>
                <li><strong>✅ Двойной прирост:</strong> Показывает % прироста от цены пользователя И от рыночной цены</li>
                <li><strong>✅ Компактные метрики:</strong> Блок "Ключевые показатели" в 2 столбца</li>
                <li><strong>✅ Цветовое кодирование:</strong> Синий (пользователь), серый (рынок), фиолетовый (аренда), зеленый (прогноз)</li>
            </ul>
        </div>
        
        <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border: 1px solid #ffc107; margin-top: 20px;">
            <h4 style="color: #856404; margin-top: 0;">📊 Технические улучшения:</h4>
            <div style="color: #856404; font-size: 14px;">
                <p><strong>Backend (app.py):</strong> API /api/currency/latest обновлен для работы с полями euro, try, rub, usd, aed, thb</p>
                <p><strong>Frontend:</strong> Функция generatePriceForecastBlock полностью переписана с расширенными расчетами и новым UI</p>
                <p><strong>Расчеты:</strong> Динамика роста, ROI, доходность, срок окупаемости основаны на рассчитанных ценах</p>
                <p><strong>Дизайн:</strong> Градиентный фон, сетка для сравнения цен, блок метрик, адаптивность</p>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px; color: #666; font-size: 14px;">
            🚀 Блок "Прогноз цен" теперь предоставляет комплексную аналитику для принятия инвестиционных решений!
        </div>
    </div>
</body>
</html>
