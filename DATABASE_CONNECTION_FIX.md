# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–ª–æ –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Supabase:
- SSL handshake timeout –æ—à–∏–±–∫–∏
- –û—à–∏–±–∫–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö `ClientOptions`
- –î–æ–ª–≥–∏–µ —Ç–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

## –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
```
2025-09-09 12:06:32,793 - Database timeout on attempt 1/5: _ssl.c:999: The handshake operation timed out
2025-09-09 12:09:13,151 - ERROR - ClientOptions.__init__() got an unexpected keyword argument 'edge_function_client_timeout'
```

## –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º
1. **SSL Handshake Timeout**: –°–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Supabase
2. **–ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ClientOptions**: –ü–∞—Ä–∞–º–µ—Ç—Ä `edge_function_client_timeout` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ Supabase Python SDK
3. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π HTTP –∫–ª–∏–µ–Ω—Ç**: –°–æ–∑–¥–∞–≤–∞–ª—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π httpx –∫–ª–∏–µ–Ω—Ç, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ Supabase

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Supabase
```python
# –î–û (–ø—Ä–æ–±–ª–µ–º–Ω–æ–µ)
options = ClientOptions(
    postgrest_client_timeout=120,
    storage_client_timeout=120,
    edge_function_client_timeout=120  # ‚ùå –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
)
supabase: Client = create_client(supabase_url, supabase_key, options=options)

# –ü–û–°–õ–ï (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ)
supabase: Client = create_client(supabase_url, supabase_key)
```

### 2. –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ SSL —Ç–∞–π–º–∞—É—Ç–æ–≤
```python
except (TimeoutException, ConnectTimeout, ConnectionError, OSError) as e:
    error_msg = str(e)
    if "handshake operation timed out" in error_msg or "timed out" in error_msg:
        logger.warning(f"SSL/Network timeout on attempt {attempt + 1}/{max_retries}: {error_msg}")
    else:
        logger.warning(f"Database connection error on attempt {attempt + 1}/{max_retries}: {error_msg}")
```

### 3. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ HTTP –∫–ª–∏–µ–Ω—Ç–∞
–£–±—Ä–∞–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π `httpx.Client`, –æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

## –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ SSL —Ç–∞–π–º–∞—É—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å retry –ª–æ–≥–∏–∫–æ–π
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ø—ã—Ç–æ–∫
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SSL —Ç–∞–π–º–∞—É—Ç–æ–≤**: –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å SSL handshake –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è, —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
2. **–í–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫**: –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Supabase SDK –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ClientOptions
3. **Retry –ª–æ–≥–∏–∫–∞**: –¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –ø–æ–ø—ã—Ç–æ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 5 —Å–µ–∫) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## –°—Ç–∞—Ç—É—Å
üü¢ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
