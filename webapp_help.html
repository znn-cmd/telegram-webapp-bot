<!DOCTYPE html>
<html lang="ru">
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-title="common.help">–ü–æ–º–æ—â—å ‚Äî Aaadviser</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; margin: 0; }
        .container { max-width: 400px; margin: 40px auto; background: #fff; border-radius: 16px; box-shadow: 0 2px 12px rgba(102,126,234,0.10); padding: 32px 20px 24px 20px; text-align: center; }
        .logo { width: 110px; height: auto; display: block; margin: 0 auto 18px auto; cursor: pointer; transition: transform 0.2s; }
        .logo:hover { transform: scale(1.05); }
        .title { font-size: 1.3em; font-weight: bold; margin-bottom: 18px; color: #333; }
        .help-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; border: none; border-radius: 12px; padding: 18px 20px; font-size: 16px; font-weight: 500; cursor: pointer; margin: 12px 0; width: 100%; text-align: left; transition: all 0.2s; box-shadow: 0 2px 8px rgba(102,126,234,0.15); display: flex; align-items: center; gap: 12px; }
        .help-btn:hover { background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); }
        .help-btn-icon { font-size: 20px; margin-right: 10px; }
        .back-btn { margin-top: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; border: none; border-radius: 10px; padding: 14px 28px; font-size: 1em; font-weight: 500; cursor: pointer; transition: background 0.2s; width: 100%; }
        .back-btn:hover { background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); }
    </style>
</head>
<body>
    <div class="container">
        <img src="logo-flt.png" alt="Aaadviser" class="logo" onclick="goToMainMenu()">
        <div class="title" data-i18n="common.help">–ü–æ–º–æ—â—å</div>
        <button class="help-btn" onclick="aboutApp()"><span class="help-btn-icon">‚ÑπÔ∏è</span><span data-i18n="help.about_app">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</span></button>
        <button class="help-btn" onclick="showInstruction()"><span class="help-btn-icon">üìñ</span><span data-i18n="help.instruction">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</span></button>
        <button class="help-btn" onclick="showGeo()"><span class="help-btn-icon">üåç</span><span data-i18n="help.geography">–ù–∞—à–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—è</span></button>
        <button class="help-btn" onclick="showSupport()"><span class="help-btn-icon">üõ†Ô∏è</span><span data-i18n="help.support">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span></button>
        <button class="back-btn" onclick="goToMainMenu()" data-i18n="common.back">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
    </div>
    <script>
        let currentLanguage = 'en';

        // Localization data
        const locales = {
            'ru': {
                'common.help': '–ü–æ–º–æ—â—å',
                'help.about_app': '–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏',
                'help.instruction': '–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è',
                'help.geography': '–ù–∞—à–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—è',
                'help.support': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞',
                'common.back': '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é'
            },
            'en': {
                'common.help': 'Help',
                'help.about_app': 'About the app',
                'help.instruction': 'Instructions',
                'help.geography': 'Our geography',
                'help.support': 'Technical support',
                'common.back': 'Back to main menu'
            },
            'de': {
                'common.help': 'Hilfe',
                'help.about_app': '√úber die App',
                'help.instruction': 'Anleitung',
                'help.geography': 'Unsere Geographie',
                'help.support': 'Technischer Support',
                'common.back': 'Zur√ºck zum Hauptmen√º'
            },
            'fr': {
                'common.help': 'Aide',
                'help.about_app': '√Ä propos de l\'app',
                'help.instruction': 'Instructions',
                'help.geography': 'Notre g√©ographie',
                'help.support': 'Support technique',
                'common.back': 'Retour au menu principal'
            },
            'tr': {
                'common.help': 'Yardƒ±m',
                'help.about_app': 'Uygulama hakkƒ±nda',
                'help.instruction': 'Talimatlar',
                'help.geography': 'Coƒürafyamƒ±z',
                'help.support': 'Teknik destek',
                'common.back': 'Ana men√ºye d√∂n'
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
        function getText(key) {
            const locale = locales[currentLanguage] || locales['en'];
            return locale[key] || key;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function getUserLanguage() {
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.id) {
                    try {
                        const response = await fetch('/api/user/language', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                telegram_id: tg.initDataUnsafe.user.id,
                                language_code: tg.initDataUnsafe.user.language_code
                            })
                        });
                        if (response.ok) {
                            const data = await response.json();
                            if (data.success) {
                                console.log(`üåê Language determined: ${data.language} (status: ${data.user_status})`);
                                return data.language;
                            }
                        }
                    } catch (error) {
                        console.warn('Error getting user language:', error);
                    }
                }
            }
            return 'en'; // Default to English
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function updatePageText() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (key) {
                    element.textContent = getText(key);
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ–º–æ—â–∏
            const aboutBtn = document.querySelector('button[onclick="aboutApp()"]');
            if (aboutBtn) {
                aboutBtn.innerHTML = `<span class="help-btn-icon">‚ÑπÔ∏è</span>${getText('help.about_app')}`;
            }
            
            const instructionBtn = document.querySelector('button[onclick="showInstruction()"]');
            if (instructionBtn) {
                instructionBtn.innerHTML = `<span class="help-btn-icon">üìñ</span>${getText('help.instruction')}`;
            }
            
            const geoBtn = document.querySelector('button[onclick="showGeo()"]');
            if (geoBtn) {
                geoBtn.innerHTML = `<span class="help-btn-icon">üåç</span>${getText('help.geography')}`;
            }
            
            const supportBtn = document.querySelector('button[onclick="showSupport()"]');
            if (supportBtn) {
                supportBtn.innerHTML = `<span class="help-btn-icon">üõ†Ô∏è</span>${getText('help.support')}`;
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        async function init() {
            currentLanguage = await getUserLanguage();
            console.log(`üåê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —è–∑—ã–∫–æ–º: ${currentLanguage}`);
            updatePageText();
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', init);

        function goToMainMenu() {
            window.location.href = '/webapp';
        }
        function aboutApp() {
            window.location.href = '/webapp_about';
        }
        function showInstruction() {
            window.location.href = '/webapp_instruction';
        }
        function showGeo() {
            window.location.href = '/webapp_geography';
        }
        function showSupport() {
            window.location.href = '/webapp_support';
        }
    </script>
</body>
</html> 