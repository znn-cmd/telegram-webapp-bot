<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .correct { background-color: #d4edda; border-color: #c3e6cb; }
        .incorrect { background-color: #f8d7da; border-color: #f5c6cb; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        .base-month { background-color: #e8f4fd; font-weight: bold; }
        .calculated { background-color: #f8f9fa; }
    </style>
</head>
<body>
    <h1>üîß –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–Ω</h1>
    
    <div class="test-result correct">
        <h2>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞</h2>
        <p><strong>–ü—Ä–∏–Ω—Ü–∏–ø:</strong> –î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Å—è—Ü–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –°–ê–ú–û–ì–û —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º–æ–≥–æ –º–µ—Å—è—Ü–∞.</p>
        <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> –¶–µ–Ω–∞_–º–µ—Å—è—Ü–∞ = –¶–µ–Ω–∞_—Å–ª–µ–¥—É—é—â–µ–≥–æ_–º–µ—Å—è—Ü–∞ √∑ (1 + –ø—Ä–æ—Ü–µ–Ω—Ç_–∏–∑–º–µ–Ω–µ–Ω–∏—è_–º–µ—Å—è—Ü–∞)</p>
    </div>

    <div id="calculationResults"></div>

    <script>
        // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–Ω
        function calculateHistoricalPrice(basePrice, percentageChange) {
            if (!basePrice || !percentageChange) return basePrice;
            
            // percentageChange —É–∂–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ 0.0225 (2.25%), –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∏—Ç—å –Ω–∞ 100
            const changeMultiplier = 1 + percentageChange;
            return basePrice / changeMultiplier;
        }

        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
        const testData = [
            { month: '–∞–≤–≥. 2025', year: 2025, monthNum: 8, basePrice: 60824.03, changePercent: 0.0225, isBase: true },
            { month: '–∏—é–ª. 2025', year: 2025, monthNum: 7, basePrice: null, changePercent: 0.0246, isBase: false },
            { month: '–∏—é–Ω. 2025', year: 2025, monthNum: 6, basePrice: null, changePercent: 0.0266, isBase: false },
            { month: '–º–∞–π. 2025', year: 2025, monthNum: 5, basePrice: null, changePercent: 0.0276, isBase: false },
            { month: '–∞–ø—Ä. 2025', year: 2025, monthNum: 4, basePrice: null, changePercent: 0.0293, isBase: false },
            { month: '–º–∞—Ä. 2025', year: 2025, monthNum: 3, basePrice: null, changePercent: 0.0212, isBase: false },
            { month: '—Ñ–µ–≤. 2025', year: 2025, monthNum: 2, basePrice: null, changePercent: 0.0220, isBase: false },
            { month: '—è–Ω–≤. 2025', year: 2025, monthNum: 1, basePrice: null, changePercent: 0.0311, isBase: false },
            { month: '–¥–µ–∫. 2024', year: 2024, monthNum: 12, basePrice: null, changePercent: 0.0190, isBase: false }
        ];

        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–µ–Ω—ã
        function calculateCorrectPrices() {
            const results = [...testData];
            
            // –ù–∞—á–∏–Ω–∞–µ–º —Å –±–∞–∑–æ–≤–æ–≥–æ –º–µ—Å—è—Ü–∞ (–∞–≤–≥—É—Å—Ç)
            let currentPrice = results[0].basePrice;
            results[0].calculatedPrice = currentPrice;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –º–µ—Å—è—Ü—ã (–æ—Ç –∞–≤–≥—É—Å—Ç–∞ –Ω–∞–∑–∞–¥)
            for (let i = 1; i < results.length; i++) {
                const currentMonth = results[i];
                const prevCalculatedPrice = results[i-1].calculatedPrice;
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –¢–ï–ö–£–©–ï–ì–û —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º–æ–≥–æ –º–µ—Å—è—Ü–∞
                currentMonth.calculatedPrice = calculateHistoricalPrice(prevCalculatedPrice, currentMonth.changePercent);
                
                console.log(`–†–∞—Å—á–µ—Ç –¥–ª—è ${currentMonth.month}:`);
                console.log(`  –¶–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞: ${prevCalculatedPrice.toFixed(2)} ‚Ç∫/–º¬≤`);
                console.log(`  –ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è: ${(currentMonth.changePercent * 100).toFixed(2)}%`);
                console.log(`  –†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞: ${currentMonth.calculatedPrice.toFixed(2)} ‚Ç∫/–º¬≤`);
                console.log('---');
            }
            
            return results;
        }

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        function displayResults() {
            const correctResults = calculateCorrectPrices();
            
            let html = `
                <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞</h2>
                <table>
                    <thead>
                        <tr>
                            <th>–ú–µ—Å—è—Ü</th>
                            <th>–ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è</th>
                            <th>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (‚Ç∫/–º¬≤)</th>
                            <th>–¶–µ–Ω–∞ –∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ (‚Ç∫/–º¬≤)</th>
                            <th>–†–∞–∑–Ω–∏—Ü–∞</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            const screenData = [
                { month: '–∞–≤–≥. 2025', screenPrice: 60824.03 },
                { month: '–∏—é–ª. 2025', screenPrice: 60809.00 },
                { month: '–∏—é–Ω. 2025', screenPrice: 60793.00 },
                { month: '–º–∞–π. 2025', screenPrice: 60776.00 },
                { month: '–∞–ø—Ä. 2025', screenPrice: 60758.00 },
                { month: '–º–∞—Ä. 2025', screenPrice: 60745.00 },
                { month: '—Ñ–µ–≤. 2025', screenPrice: 60732.00 },
                { month: '—è–Ω–≤. 2025', screenPrice: 60713.00 },
                { month: '–¥–µ–∫. 2024', screenPrice: 60701.00 }
            ];
            
            correctResults.forEach((result, index) => {
                const screenResult = screenData[index];
                const difference = result.calculatedPrice - screenResult.screenPrice;
                const isCorrect = Math.abs(difference) < 1; // –î–æ–ø—É—Å–∫ 1 –ª–∏—Ä–∞
                
                html += `
                    <tr class="${result.isBase ? 'base-month' : 'calculated'}">
                        <td>${result.month}</td>
                        <td>${(result.changePercent * 100).toFixed(2)}%</td>
                        <td>${result.calculatedPrice.toFixed(2)}</td>
                        <td>${screenResult.screenPrice.toFixed(2)}</td>
                        <td style="color: ${difference > 0 ? 'red' : 'green'}">
                            ${difference > 0 ? '+' : ''}${difference.toFixed(2)}
                        </td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
                
                <div class="test-result">
                    <h3>üìù –í—ã–≤–æ–¥—ã:</h3>
                    <ul>
                        <li><strong>–ë–∞–∑–æ–≤—ã–π –º–µ—Å—è—Ü (–∞–≤–≥—É—Å—Ç):</strong> –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –∏–∑ 4 —Ç–∞–±–ª–∏—Ü</li>
                        <li><strong>–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –º–µ—Å—è—Ü—ã:</strong> –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ</li>
                        <li><strong>–ü—Ä–∏—á–∏–Ω–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π:</strong> –í —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞</li>
                        <li><strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è calculateHistoricalPrice() –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤</li>
                    </ul>
                </div>
                
                <div class="test-result correct">
                    <h3>‚úÖ –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è –∏—é–ª—è 2025:</h3>
                    <p><strong>–¶–µ–Ω–∞ –∞–≤–≥—É—Å—Ç–∞:</strong> 60,824.03 ‚Ç∫/–º¬≤</p>
                    <p><strong>–ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—é–ª—è:</strong> +2.46%</p>
                    <p><strong>–§–æ—Ä–º—É–ª–∞:</strong> 60,824.03 √∑ (1 + 0.0246) = 60,824.03 √∑ 1.0246</p>
                    <p><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong> ${correctResults[1].calculatedPrice.toFixed(2)} ‚Ç∫/–º¬≤</p>
                    <p><strong>–ë—ã–ª–æ –≤ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ:</strong> 60,809.00 ‚Ç∫/–º¬≤ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)</p>
                </div>
            `;
            
            document.getElementById('calculationResults').innerHTML = html;
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = displayResults;
    </script>
</body>
</html>
