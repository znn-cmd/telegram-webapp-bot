# –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –≥–µ–æ–∫–æ–¥–∏–Ω–≥–æ–º

## –ü—Ä–æ–±–ª–µ–º–∞:
–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Ç—É—Ä–µ—Ü–∫–æ–≥–æ –∞–¥—Ä–µ—Å–∞ "Baraj, 5890. Sk. No:584, 07320 Kepez/Antalya" –∏ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ "–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."

**–õ–æ–≥ –æ—à–∏–±–∫–∏:**
```
[21:07:26]: 2025-08-07 18:07:25,047 - __main__ - ERROR - Geocoding error: HTTPSConnectionPool(host='maps.googleapis.com', port=443): Max retries exceeded with url: /maps/api/geocode/json?address=Baraj%2C+5890.+Sk.+No%3A584%2C+07320+Kepez%2FAntalya%2C+%D0%A2%D1%83%D1%80%D1%86%D0%B8%D1%8F&key=AIzaSyBrDkDpNKNAIyY147MQ78hchBkeyCAxhEw (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7fd5c7890e50>: Failed to establish a new connection: [Errno 101] Network is unreachable'))
```

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ amvera.yaml

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –í `amvera.yaml` –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–∞–∑—ã–≤–∞–ª–∞—Å—å `SUPABASE_KEY`
- –í –∫–æ–¥–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è `SUPABASE_ANON_KEY`
- –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Supabase –∫–ª–∏–µ–Ω—Ç–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```yaml
# –ë—ã–ª–æ:
- name: SUPABASE_KEY
  value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# –°—Ç–∞–ª–æ:
- name: SUPABASE_ANON_KEY
  value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 2. ‚ùå –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Google Maps API

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- Google Maps API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞ Amvera
- –û—à–∏–±–∫–∞ "Network is unreachable" —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ Nominatim API
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 3. ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –û—à–∏–±–∫–∏ –≤ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–µ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å –¥–µ—Ç–∞–ª—å–Ω–æ
- –°–ª–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–Ω—è—Ç—å, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω traceback –¥–ª—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫

## –ù–æ–≤–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞:

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```python
# –ü—Ä–æ—Å—Ç–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞
geocoding_cache = {}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º –∫ API
if address in geocoding_cache:
    logger.info("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–π–¥–µ–Ω –≤ –∫—ç—à–µ")
    return jsonify(geocoding_cache[address])
```

### 2. Fallback –º–µ—Ö–∞–Ω–∏–∑–º
```python
# –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º Google Maps API
google_result = try_google_maps_geocoding(address)

if google_result and google_result.get('success'):
    return jsonify(google_result)

# –ï—Å–ª–∏ Google Maps API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–±—É–µ–º Nominatim
nominatim_result = try_nominatim_geocoding(address)

if nominatim_result and nominatim_result.get('success'):
    return jsonify(nominatim_result)
```

### 3. –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### `try_google_maps_geocoding(address)`
- –ü—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≥–µ–æ–∫–æ–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ Google Maps API
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None` –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤

#### `try_nominatim_geocoding(address)`
- –ü—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≥–µ–æ–∫–æ–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ Nominatim
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenStreetMap –¥–∞–Ω–Ω—ã–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None` –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

### –ù–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
logger.info(f"üîç –ù–∞—á–∏–Ω–∞–µ–º –≥–µ–æ–∫–æ–¥–∏–Ω–≥ –∞–¥—Ä–µ—Å–∞: {address}")
logger.info(f"üåê –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ Google Maps API")
logger.warning("‚ö†Ô∏è Google Maps API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–±—É–µ–º Nominatim...")
logger.info(f"‚úÖ –ê–¥—Ä–µ—Å –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ Nominatim: {formatted_address}")
logger.error("‚ùå –í—Å–µ –≥–µ–æ–∫–æ–¥–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫:
```python
except requests.exceptions.Timeout:
    logger.error("‚ùå –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ Google Maps API")
    return None
except requests.exceptions.RequestException as e:
    logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ Google Maps API: {e}")
    return None
except Exception as e:
    logger.error(f"‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ Google Maps API: {e}")
    return None
```

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### 1. `amvera.yaml`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `SUPABASE_KEY` ‚Üí `SUPABASE_ANON_KEY`

### 2. `app.py`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –º–µ—Ö–∞–Ω–∏–∑–º —Å Nominatim
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ:

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase**: ‚úÖ
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - Supabase –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

2. **–ù–∞–¥–µ–∂–Ω—ã–π –≥–µ–æ–∫–æ–¥–∏–Ω–≥**: ‚úÖ
   - Fallback –Ω–∞ Nominatim –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Google Maps API
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫

3. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ
   - –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
   - –û—à–∏–±–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
   - –õ–µ–≥–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: ‚úÖ
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ API

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞:
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—É—Ä–µ—Ü–∫–∏–µ –∞–¥—Ä–µ—Å–∞
- ‚úÖ –ù–µ –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nominatim –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Google Maps API
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–∞ Amvera

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –≥–µ–æ–∫–æ–¥–∏–Ω–≥–æ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç:
- **–ù–∞–¥–µ–∂–Ω—ã–π fallback –º–µ—Ö–∞–Ω–∏–∑–º** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º
- **–û–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Amvera –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–∞–∂–µ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö!**
