<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aaadviser - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–≥–∏–æ–Ω–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 2px solid #f0f0f0;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 8px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .slogan {
            font-size: 14px;
            color: #666;
            font-style: italic;
        }

        .page-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin: 20px 0 10px 0;
            padding: 0;
            background: none;
            border-radius: 0;
        }

        .page-description {
            font-size: 16px;
            color: #666;
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.5;
            padding: 0 10px;
        }

        .back-button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3);
        }

        .location-selector {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .selector-group {
            margin-bottom: 20px;
        }

        .selector-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .selector-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            color: #333;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .selector-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .selector-select:disabled {
            background: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
        }

        .confirm-button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s ease;
            text-align: center;
        }

        .confirm-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .confirm-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .selected-location {
            background: #e8f5e8;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
            display: none;
        }

        .selected-location.show {
            display: block;
        }

        .location-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .location-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #d4edda;
        }

        .location-item:last-child {
            border-bottom: none;
        }

        .location-name {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }

        .location-id {
            font-size: 12px;
            color: #666;
            font-family: monospace;
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .report-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
            display: none;
        }

        .report-section.show {
            display: block;
        }

        .report-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .report-placeholder {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .report-placeholder-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –õ–æ–≥–æ—Ç–∏–ø -->
        <div style="display:flex;flex-direction:column;align-items:center;margin-top:18px;margin-bottom:10px;">
            <img src="logo-flt.png" alt="Aaadviser Logo" style="width:110px;height:auto;display:block;margin-bottom:8px;cursor:pointer;" onclick="goToMainMenu()" />
            <div style="font-size:15px;color:#888;font-style:italic;" id="slogan">–ò–Ω—Å–∞–π—Ç—ã —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</div>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <div class="page-title" id="pageTitle">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–≥–∏–æ–Ω–∞</div>

        <!-- –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <div class="page-description" id="pageDescription">
            –ü–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ä–µ–≥–∏–æ–Ω–µ —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ —Ü–µ–Ω
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ -->
        <a href="/webapp_main" class="back-button" id="backButton">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</a>

        <!-- –°–µ–ª–µ–∫—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–π -->
        <div class="location-selector fade-in">
            <div class="selector-group">
                <label class="selector-label" id="countryLabel">–°—Ç—Ä–∞–Ω–∞:</label>
                <select class="selector-select" id="countrySelect" onchange="onCountryChange()">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                </select>
            </div>

            <div class="selector-group">
                <label class="selector-label" id="cityLabel">–ì–æ—Ä–æ–¥:</label>
                <select class="selector-select" id="citySelect" onchange="onCityChange()" disabled>
                    <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                </select>
            </div>

            <div class="selector-group">
                <label class="selector-label" id="countyLabel">–û–±–ª–∞—Å—Ç—å/–†–µ–≥–∏–æ–Ω:</label>
                <select class="selector-select" id="countySelect" onchange="onCountyChange()" disabled>
                    <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                </select>
            </div>

            <div class="selector-group">
                <label class="selector-label" id="districtLabel">–†–∞–π–æ–Ω:</label>
                <select class="selector-select" id="districtSelect" onchange="onDistrictChange()" disabled>
                    <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å</option>
                </select>
            </div>

            <button class="confirm-button" id="confirmButton" onclick="confirmLocationSelection()" disabled>
                <span id="confirmButtonText">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä</span>
            </button>
        </div>

        <!-- –í—ã–±—Ä–∞–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è -->
        <div class="selected-location" id="selectedLocation">
            <div class="location-title" id="selectedLocationTitle">–í—ã–±—Ä–∞–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è</div>
            <div class="location-item">
                <span class="location-name" id="selectedCountryName">–°—Ç—Ä–∞–Ω–∞: </span>
                <span class="location-id" id="selectedCountryId"></span>
            </div>
            <div class="location-item">
                <span class="location-name" id="selectedCityName">–ì–æ—Ä–æ–¥: </span>
                <span class="location-id" id="selectedCityId"></span>
            </div>
            <div class="location-item">
                <span class="location-name" id="selectedCountyName">–û–±–ª–∞—Å—Ç—å: </span>
                <span class="location-id" id="selectedCountyId"></span>
            </div>
            <div class="location-item">
                <span class="location-name" id="selectedDistrictName">–†–∞–π–æ–Ω: </span>
                <span class="location-id" id="selectedDistrictId"></span>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –æ—Ç—á–µ—Ç–∞ -->
        <div class="report-section" id="reportSection">
            <div class="report-title" id="reportSectionTitle">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞</div>
            <div class="report-placeholder">
                <div class="report-placeholder-icon">üìä</div>
                <div id="reportPlaceholderText">–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç—á–µ—Ç –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ä–µ–≥–∏–æ–Ω—É</div>
            </div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        let currentLanguage = 'ru';
        let userInfo = null;

        // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
        const locales = {
            'ru': {
                'slogan': '–ò–Ω—Å–∞–π—Ç—ã —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏',
                'pageTitle': '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–≥–∏–æ–Ω–∞',
                'pageDescription': '–ü–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ä–µ–≥–∏–æ–Ω–µ —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ —Ü–µ–Ω',
                'backButton': '‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é',
                'countryLabel': '–°—Ç—Ä–∞–Ω–∞:',
                'cityLabel': '–ì–æ—Ä–æ–¥:',
                'countyLabel': '–û–±–ª–∞—Å—Ç—å/–†–µ–≥–∏–æ–Ω:',
                'districtLabel': '–†–∞–π–æ–Ω:',
                'selectCountry': '–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É',
                'selectCity': '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É',
                'selectCounty': '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥',
                'selectDistrict': '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å',
                'confirmButton': '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä',
                'selectedLocationTitle': '–í—ã–±—Ä–∞–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è',
                'countryName': '–°—Ç—Ä–∞–Ω–∞: ',
                'cityName': '–ì–æ—Ä–æ–¥: ',
                'countyName': '–û–±–ª–∞—Å—Ç—å: ',
                'districtName': '–†–∞–π–æ–Ω: ',
                'reportSectionTitle': '–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞',
                'reportPlaceholderText': '–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç—á–µ—Ç –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ä–µ–≥–∏–æ–Ω—É',
                'noValue': '–Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è'
            },
            'en': {
                'slogan': 'Real Estate Market Insights',
                'pageTitle': 'Region Analytics',
                'pageDescription': 'Get a detailed analysis of the real estate market in the selected region with price forecasts',
                'backButton': '‚Üê Back to Main Menu',
                'countryLabel': 'Country:',
                'cityLabel': 'City:',
                'countyLabel': 'County/Region:',
                'districtLabel': 'District:',
                'selectCountry': 'Select country',
                'selectCity': 'First select country',
                'selectCounty': 'First select city',
                'selectDistrict': 'First select county',
                'confirmButton': 'Confirm Selection',
                'selectedLocationTitle': 'Selected Location',
                'countryName': 'Country: ',
                'cityName': 'City: ',
                'countyName': 'County: ',
                'districtName': 'District: ',
                'reportSectionTitle': 'Report Generation',
                'reportPlaceholderText': 'Report for the selected region will be generated here',
                'noValue': 'no value'
            },
            'de': {
                'slogan': 'Immobilienmarkt-Einblicke',
                'pageTitle': 'Regionsanalyse',
                'pageDescription': 'Erhalten Sie eine detaillierte Analyse des Immobilienmarkts in der ausgew√§hlten Region mit Preisprognosen',
                'backButton': '‚Üê Zur√ºck zum Hauptmen√º',
                'countryLabel': 'Land:',
                'cityLabel': 'Stadt:',
                'countyLabel': 'Bezirk/Region:',
                'districtLabel': 'Viertel:',
                'selectCountry': 'Land ausw√§hlen',
                'selectCity': 'Zuerst Land ausw√§hlen',
                'selectCounty': 'Zuerst Stadt ausw√§hlen',
                'selectDistrict': 'Zuerst Bezirk ausw√§hlen',
                'confirmButton': 'Auswahl best√§tigen',
                'selectedLocationTitle': 'Ausgew√§hlter Standort',
                'countryName': 'Land: ',
                'cityName': 'Stadt: ',
                'countyName': 'Bezirk: ',
                'districtName': 'Viertel: ',
                'reportSectionTitle': 'Berichtserstellung',
                'reportPlaceholderText': 'Hier wird der Bericht f√ºr die ausgew√§hlte Region erstellt',
                'noValue': 'kein Wert'
            },
            'fr': {
                'slogan': 'Aper√ßus du march√© immobilier',
                'pageTitle': 'Analyse de r√©gion',
                'pageDescription': 'Obtenez une analyse d√©taill√©e du march√© immobilier dans la r√©gion s√©lectionn√©e avec des pr√©visions de prix',
                'backButton': '‚Üê Retour au menu principal',
                'countryLabel': 'Pays:',
                'cityLabel': 'Ville:',
                'countyLabel': 'Comt√©/R√©gion:',
                'districtLabel': 'Quartier:',
                'selectCountry': 'S√©lectionner le pays',
                'selectCity': 'D\'abord s√©lectionner le pays',
                'selectCounty': 'D\'abord s√©lectionner la ville',
                'selectDistrict': 'D\'abord s√©lectionner le comt√©',
                'confirmButton': 'Confirmer la s√©lection',
                'selectedLocationTitle': 'Emplacement s√©lectionn√©',
                'countryName': 'Pays: ',
                'cityName': 'Ville: ',
                'countyName': 'Comt√©: ',
                'districtName': 'Quartier: ',
                'reportSectionTitle': 'G√©n√©ration du rapport',
                'reportPlaceholderText': 'Le rapport pour la r√©gion s√©lectionn√©e sera g√©n√©r√© ici',
                'noValue': 'aucune valeur'
            },
            'tr': {
                'slogan': 'Emlak piyasasƒ± i√ßg√∂r√ºleri',
                'pageTitle': 'B√∂lge analizi',
                'pageDescription': 'Se√ßilen b√∂lgedeki emlak piyasasƒ±nƒ±n fiyat tahminleri ile detaylƒ± analizini alƒ±n',
                'backButton': '‚Üê Ana men√ºye d√∂n',
                'countryLabel': '√úlke:',
                'cityLabel': '≈ûehir:',
                'countyLabel': 'ƒ∞l/B√∂lge:',
                'districtLabel': 'ƒ∞l√ße:',
                'selectCountry': '√úlke se√ßin',
                'selectCity': '√ñnce √ºlke se√ßin',
                'selectCounty': '√ñnce ≈üehir se√ßin',
                'selectDistrict': '√ñnce il se√ßin',
                'confirmButton': 'Se√ßimi onayla',
                'selectedLocationTitle': 'Se√ßilen konum',
                'countryName': '√úlke: ',
                'cityName': '≈ûehir: ',
                'countyName': 'ƒ∞l: ',
                'districtName': 'ƒ∞l√ße: ',
                'reportSectionTitle': 'Rapor olu≈üturma',
                'reportPlaceholderText': 'Se√ßilen b√∂lge i√ßin rapor burada olu≈üturulacak',
                'noValue': 'deƒüer yok'
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
        function getText(key) {
            const locale = locales[currentLanguage] || locales['ru'];
            return locale[key] || key;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function updatePageText() {
            document.getElementById('slogan').textContent = getText('slogan');
            document.getElementById('pageTitle').textContent = getText('pageTitle');
            document.getElementById('pageDescription').textContent = getText('pageDescription');
            document.getElementById('backButton').textContent = getText('backButton');
            document.getElementById('countryLabel').textContent = getText('countryLabel');
            document.getElementById('cityLabel').textContent = getText('cityLabel');
            document.getElementById('countyLabel').textContent = getText('countyLabel');
            document.getElementById('districtLabel').textContent = getText('districtLabel');
            document.getElementById('confirmButtonText').textContent = getText('confirmButton');
            document.getElementById('selectedLocationTitle').textContent = getText('selectedLocationTitle');
            document.getElementById('countryName').textContent = getText('countryName');
            document.getElementById('cityName').textContent = getText('cityName');
            document.getElementById('countyName').textContent = getText('countyName');
            document.getElementById('districtName').textContent = getText('districtName');
            document.getElementById('reportSectionTitle').textContent = getText('reportSectionTitle');
            document.getElementById('reportPlaceholderText').textContent = getText('reportPlaceholderText');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º placeholder —Ç–µ–∫—Å—Ç—ã –≤ —Å–µ–ª–µ–∫—Ç–∞—Ö
            updateSelectPlaceholders();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ placeholder —Ç–µ–∫—Å—Ç–æ–≤ –≤ —Å–µ–ª–µ–∫—Ç–∞—Ö
        function updateSelectPlaceholders() {
            const countrySelect = document.getElementById('countrySelect');
            const citySelect = document.getElementById('citySelect');
            const countySelect = document.getElementById('countySelect');
            const districtSelect = document.getElementById('districtSelect');

            if (countrySelect.options.length === 1) {
                countrySelect.options[0].text = getText('selectCountry');
            }
            if (citySelect.options.length === 1) {
                citySelect.options[0].text = getText('selectCity');
            }
            if (countySelect.options.length === 1) {
                countySelect.options[0].text = getText('selectCounty');
            }
            if (districtSelect.options.length === 1) {
                districtSelect.options[0].text = getText('selectDistrict');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        function goToMainMenu() {
            window.location.href = '/webapp_main';
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–µ–ª–µ–∫—Ç–∞—Ö
        function onCountryChange() {
            const countrySelect = document.getElementById('countrySelect');
            const citySelect = document.getElementById('citySelect');
            const countySelect = document.getElementById('countySelect');
            const districtSelect = document.getElementById('districtSelect');
            const confirmButton = document.getElementById('confirmButton');

            // –°–±—Ä–æ—Å –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ–ª–µ–∫—Ç–æ–≤
            citySelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>';
            countySelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>';
            districtSelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å</option>';
            
            citySelect.disabled = true;
            countySelect.disabled = true;
            districtSelect.disabled = true;
            confirmButton.disabled = true;

            if (countrySelect.value) {
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã
                loadCities(countrySelect.value);
            }
        }

        function onCityChange() {
            const citySelect = document.getElementById('citySelect');
            const countySelect = document.getElementById('countySelect');
            const districtSelect = document.getElementById('districtSelect');
            const confirmButton = document.getElementById('confirmButton');

            // –°–±—Ä–æ—Å –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ–ª–µ–∫—Ç–æ–≤
            countySelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>';
            districtSelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å</option>';
            
            countySelect.disabled = true;
            districtSelect.disabled = true;
            confirmButton.disabled = true;

            if (citySelect.value) {
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–∞—Å—Ç–µ–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
                loadCounties(citySelect.value);
            }
        }

        function onCountyChange() {
            const countySelect = document.getElementById('countySelect');
            const districtSelect = document.getElementById('districtSelect');
            const confirmButton = document.getElementById('confirmButton');

            // –°–±—Ä–æ—Å –∑–∞–≤–∏—Å–∏–º–æ–≥–æ —Å–µ–ª–µ–∫—Ç–∞
            districtSelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å</option>';
            
            districtSelect.disabled = true;
            confirmButton.disabled = true;

            if (countySelect.value) {
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–π–æ–Ω–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
                loadDistricts(countySelect.value);
            }
        }

        function onDistrictChange() {
            const districtSelect = document.getElementById('districtSelect');
            const confirmButton = document.getElementById('confirmButton');

            if (districtSelect.value) {
                confirmButton.disabled = false;
            } else {
                confirmButton.disabled = true;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
        function loadCities(countryId) {
            const citySelect = document.getElementById('citySelect');
            citySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>';
            
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç API –≤—ã–∑–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ—Ä–æ–¥–æ–≤
            // –ü–æ–∫–∞ –¥–æ–±–∞–≤–ª—è–µ–º –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ
            const demoCities = [
                { id: 1, name: '–ú–æ—Å–∫–≤–∞' },
                { id: 2, name: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥' },
                { id: 3, name: '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫' }
            ];
            
            demoCities.forEach(city => {
                const option = document.createElement('option');
                option.value = city.id;
                option.textContent = city.name;
                citySelect.appendChild(option);
            });
            
            citySelect.disabled = false;
        }

        function loadCounties(cityId) {
            const countySelect = document.getElementById('countySelect');
            countySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å</option>';
            
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç API –≤—ã–∑–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–ª–∞—Å—Ç–µ–π
            // –ü–æ–∫–∞ –¥–æ–±–∞–≤–ª—è–µ–º –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ
            const demoCounties = [
                { id: 1, name: '–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å' },
                { id: 2, name: '–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å' },
                { id: 3, name: '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å' }
            ];
            
            demoCounties.forEach(county => {
                const option = document.createElement('option');
                option.value = county.id;
                option.textContent = county.name;
                countySelect.appendChild(option);
            });
            
            countySelect.disabled = false;
        }

        function loadDistricts(countyId) {
            const districtSelect = document.getElementById('districtSelect');
            districtSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω</option>';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ü–∏—é "–Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è"
            const noValueOption = document.createElement('option');
            noValueOption.value = 'none';
            noValueOption.textContent = getText('noValue');
            districtSelect.appendChild(noValueOption);
            
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç API –≤—ã–∑–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞–π–æ–Ω–æ–≤
            // –ü–æ–∫–∞ –¥–æ–±–∞–≤–ª—è–µ–º –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ
            const demoDistricts = [
                { id: 1, name: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω' },
                { id: 2, name: '–°–µ–≤–µ—Ä–Ω—ã–π —Ä–∞–π–æ–Ω' },
                { id: 3, name: '–Æ–∂–Ω—ã–π —Ä–∞–π–æ–Ω' }
            ];
            
            demoDistricts.forEach(district => {
                const option = document.createElement('option');
                option.value = district.id;
                option.textContent = district.name;
                districtSelect.appendChild(option);
            });
            
            districtSelect.disabled = false;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
        function confirmLocationSelection() {
            const countrySelect = document.getElementById('countrySelect');
            const citySelect = document.getElementById('citySelect');
            const countySelect = document.getElementById('countySelect');
            const districtSelect = document.getElementById('districtSelect');

            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            const countryId = countrySelect.value;
            const cityId = citySelect.value;
            const countyId = countySelect.value;
            const districtId = districtSelect.value;

            // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è
            const countryName = countrySelect.options[countrySelect.selectedIndex].text;
            const cityName = citySelect.options[citySelect.selectedIndex].text;
            const countyName = countySelect.options[countySelect.selectedIndex].text;
            const districtName = districtSelect.options[districtSelect.selectedIndex].text;

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏
            document.getElementById('selectedCountryName').textContent = getText('countryName') + countryName;
            document.getElementById('selectedCityName').textContent = getText('cityName') + cityName;
            document.getElementById('selectedCountyName').textContent = getText('countyName') + countyName;
            document.getElementById('selectedDistrictName').textContent = getText('districtName') + districtName;

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º ID –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
            if (userInfo && userInfo.user_status === 'admin') {
                document.getElementById('selectedCountryId').textContent = `ID: ${countryId}`;
                document.getElementById('selectedCityId').textContent = `ID: ${cityId}`;
                document.getElementById('selectedCountyId').textContent = `ID: ${countyId}`;
                document.getElementById('selectedDistrictId').textContent = districtId === 'none' ? 'ID: null' : `ID: ${districtId}`;
            } else {
                document.getElementById('selectedCountryId').textContent = '';
                document.getElementById('selectedCityId').textContent = '';
                document.getElementById('selectedCountyId').textContent = '';
                document.getElementById('selectedDistrictId').textContent = '';
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏–∏
            document.getElementById('selectedLocation').classList.add('show');
            document.getElementById('reportSection').classList.add('show');

            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏
            document.getElementById('selectedLocation').scrollIntoView({ behavior: 'smooth' });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞–¥–º–∏–Ω–∞
            // –ü–æ–∫–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ
            userInfo = { user_status: 'admin' }; // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            
            updatePageText();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω—ã (–¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ)
            const countrySelect = document.getElementById('countrySelect');
            countrySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>';
            
            const demoCountries = [
                { id: 1, name: '–†–æ—Å—Å–∏—è' },
                { id: 2, name: '–ì–µ—Ä–º–∞–Ω–∏—è' },
                { id: 3, name: '–§—Ä–∞–Ω—Ü–∏—è' }
            ];
            
            demoCountries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.id;
                option.textContent = country.name;
                countrySelect.appendChild(option);
            });
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
        init();
    </script>
</body>
</html>
