<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личный кабинет — Aaadviser</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; margin: 0; }
        .container { max-width: 400px; margin: 40px auto; background: #fff; border-radius: 16px; box-shadow: 0 2px 12px rgba(102,126,234,0.10); padding: 32px 20px 24px 20px; text-align: center; }
        .title { font-size: 1.3em; font-weight: bold; margin-bottom: 18px; color: #333; }
        .back-btn { margin-top: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; border: none; border-radius: 10px; padding: 14px 28px; font-size: 1em; font-weight: 500; cursor: pointer; transition: background 0.2s; }
        .back-btn:hover { background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Личный кабинет</div>
        <div id="balance-block" style="margin-bottom:22px;display:none;"></div>
        <button class="back-btn" onclick="goToMainMenu()">Вернуться в главное меню</button>
    </div>
    <script>
        function goToMainMenu() {
            window.location.href = '/webapp';
        }
        // Баланс и приветствие
        document.addEventListener('DOMContentLoaded', function() {
            let tgUser = null;
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe && window.Telegram.WebApp.initDataUnsafe.user) {
                tgUser = window.Telegram.WebApp.initDataUnsafe.user;
            } else if (localStorage.getItem('telegram_id')) {
                tgUser = { id: localStorage.getItem('telegram_id') };
            }
            if (!tgUser || !tgUser.id) return;
            fetch('/api/user', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ telegram_id: tgUser.id, username: tgUser.username, first_name: tgUser.first_name, last_name: tgUser.last_name })
            })
            .then(res => res.json())
            .then(data => {
                if (data && (data.first_name || data.username)) {
                    let name = data.first_name ? data.first_name : (data.username ? '@' + data.username : 'Пользователь');
                    let balance = typeof data.balance === 'number' ? data.balance : 0;
                    document.getElementById('balance-block').innerHTML = `
                        <div style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border-radius:12px;padding:20px 16px 16px 16px;box-shadow:0 2px 8px rgba(102,126,234,0.10);font-size:1.1em;">
                            <div style='font-size:1.1em;margin-bottom:8px;'>Здравствуйте, <b>${name}</b>!</div>
                            <div style='font-size:1.2em;font-weight:600;'>Ваш баланс: <span style='color:#ffd700;'>$${balance}</span></div>
                        </div>
                    `;
                    document.getElementById('balance-block').style.display = '';
                }
            });
        });
    </script>
</body>
</html> 